!function(t){var o={};function n(r){if(o[r])return o[r].exports;var e=o[r]={i:r,l:!1,exports:{}};return t[r].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=o,n.d=function(t,o,r){n.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,o){if(1&o&&(t=n(t)),8&o)return t;if(4&o&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var e in t)n.d(r,e,function(o){return t[o]}.bind(null,e));return r},n.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},n.p="",n(n.s=0)}([function(t,o,n){"use strict";n.r(o),n.d(o,"PhotoEditor",(function(){return j}));var r,e=function(){function t(t){this.canvas=t.canvas,this.context=t.context,this.color=t.color,this.width=t.width}return t.prototype.start=function(t){},t.prototype.move=function(t){},t.prototype.end=function(t){},t.prototype.drawLine=function(t,o,n,r){this.context.beginPath(),this.context.strokeStyle=this.color,this.context.lineWidth=this.width,this.context.moveTo(t,o),this.context.lineTo(n,r),this.context.stroke(),this.context.closePath()},t}(),i=(r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])})(t,o)},function(t,o){function n(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}),c=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return i(o,t),o}(e),u=function(){var t=function(o,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])})(o,n)};return function(o,n){function r(){this.constructor=o}t(o,n),o.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return u(o,t),o}(e),f=function(){var t=function(o,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])})(o,n)};return function(o,n){function r(){this.constructor=o}t(o,n),o.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return f(o,t),o}(e),a=function(){var t=function(o,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])})(o,n)};return function(o,n){function r(){this.constructor=o}t(o,n),o.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.isDrawing=!1,o.startX=0,o.startY=0,o}return a(o,t),o.prototype.start=function(t){this.startX=t.offsetX,this.startY=t.offsetY,this.isDrawing=!0},o.prototype.move=function(t){this.isDrawing&&(this.drawLine(this.startX,this.startY,t.offsetX,t.offsetY),this.startX=t.offsetX,this.startY=t.offsetY)},o.prototype.end=function(t){this.isDrawing&&(this.drawLine(this.startX,this.startY,t.offsetX,t.offsetY),this.startX=0,this.startY=0,this.isDrawing=!1)},o}(e),l=function(){var t=function(o,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])})(o,n)};return function(o,n){function r(){this.constructor=o}t(o,n),o.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return l(o,t),o}(e),_=function(){var t=function(o,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])})(o,n)};return function(o,n){function r(){this.constructor=o}t(o,n),o.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return _(o,t),o}(e),w=function(){var t=function(o,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])})(o,n)};return function(o,n){function r(){this.constructor=o}t(o,n),o.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return w(o,t),o}(e),O=function(){var t=function(o,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])})(o,n)};return function(o,n){function r(){this.constructor=o}t(o,n),o.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return O(o,t),o}(e),P=function(){function t(t){this.color="red",this.width=5,this.canvas=document.getElementById(t.id),this.context=this.canvas.getContext("2d");var o={canvas:this.canvas,context:this.context,color:this.color,width:this.width};this.arrowTool=new c(o),this.ellipsisTool=new s(o),this.rectangleTool=new p(o),this.penTool=new h(o),this.mosaicTool=new y(o),this.textTool=new d(o),this.diameterTool=new v(o),this.colorTool=new b(o),this.currentTool=this.penTool}return t.prototype.chooseTool=function(t){this.currentTool=t,this.currentTool.color=this.color,this.currentTool.width=this.width},t.prototype.onStart=function(t){this.currentTool.start(t)},t.prototype.onMove=function(t){this.currentTool.move(t)},t.prototype.onEnd=function(t){this.currentTool.end(t)},t}(),j=function(){var t=this;this.editor=new P({id:"demo"}),this.editor.canvas.addEventListener("mousedown",(function(o){t.editor.onStart(o)})),this.editor.canvas.addEventListener("mousemove",(function(o){t.editor.onMove(o)})),window.addEventListener("mouseup",(function(o){t.editor.onEnd(o)}))};new j}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi90b29sLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvYXJyb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9lbGxpcHNpcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL3JlY3RhbmdsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL3Blbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL21vc2FpYy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL3RleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9kaWFtZXRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL2NvbG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvZWRpdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIm9wdGlvbnMiLCJ0aGlzIiwiY2FudmFzIiwiY29udGV4dCIsImNvbG9yIiwid2lkdGgiLCJzdGFydCIsImUiLCJtb3ZlIiwiZW5kIiwiZHJhd0xpbmUiLCJ4MSIsInkxIiwieDIiLCJ5MiIsImJlZ2luUGF0aCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwiY2xvc2VQYXRoIiwiVG9vbCIsImlzRHJhd2luZyIsInN0YXJ0WCIsInN0YXJ0WSIsIm9mZnNldFgiLCJvZmZzZXRZIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlkIiwiZ2V0Q29udGV4dCIsInRvb2xPcHRpb25zIiwiYXJyb3dUb29sIiwiQXJyb3ciLCJlbGxpcHNpc1Rvb2wiLCJFbGxpcHNpcyIsInJlY3RhbmdsZVRvb2wiLCJSZWN0YW5nbGUiLCJwZW5Ub29sIiwiUGVuIiwibW9zYWljVG9vbCIsIk1vc2FpYyIsInRleHRUb29sIiwiVGV4dCIsImRpYW1ldGVyVG9vbCIsIkRpYW1ldGVyIiwiY29sb3JUb29sIiwiQ29sb3IiLCJjdXJyZW50VG9vbCIsImNob29zZVRvb2wiLCJ0b29sIiwib25TdGFydCIsIm9uTW92ZSIsIm9uRW5kIiwiZWRpdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIndpbmRvdyJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9B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QUFLRCxJQUdqQixZQUFBK0MsTUFBUCxTQUFhL0MsR0FDWE4sS0FBS2dELFlBQVl4QyxJQUFJRixJQUV6QixFQXREQSxHQ1JBLEVBRUUsc0JBQ0VOLEtBQUtzRCxPQUFTLElBQUksRUFBTyxDQUN2QnpCLEdBQUksU0FHTjdCLEtBQUtzRCxPQUFPckQsT0FBT3NELGlCQUFpQixhQUFhLFNBQUNqRCxHQUNoRCxFQUFLZ0QsT0FBT0gsUUFBUTdDLE1BR3RCTixLQUFLc0QsT0FBT3JELE9BQU9zRCxpQkFBaUIsYUFBYSxTQUFDakQsR0FDaEQsRUFBS2dELE9BQU9GLE9BQU85QyxNQUdyQmtELE9BQU9ELGlCQUFpQixXQUFXLFNBQUNqRCxHQUNsQyxFQUFLZ0QsT0FBT0QsTUFBTS9DLE9BS3hCLElBQUkiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGNsYXNzIFRvb2wge1xuICBwcm90ZWN0ZWQgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudFxuICBwcm90ZWN0ZWQgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEXG4gIHB1YmxpYyBjb2xvcjogc3RyaW5nXG4gIHB1YmxpYyB3aWR0aDogbnVtYmVyXG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogVG9vbE9wdGlvbnMpIHtcbiAgICB0aGlzLmNhbnZhcyA9IG9wdGlvbnMuY2FudmFzXG4gICAgdGhpcy5jb250ZXh0ID0gb3B0aW9ucy5jb250ZXh0XG4gICAgdGhpcy5jb2xvciA9IG9wdGlvbnMuY29sb3JcbiAgICB0aGlzLndpZHRoID0gb3B0aW9ucy53aWR0aFxuICB9XG5cbiAgc3RhcnQoZTogTW91c2VFdmVudCkgeyB9XG4gIG1vdmUoZTogTW91c2VFdmVudCkgeyB9XG4gIGVuZChlOiBNb3VzZUV2ZW50KSB7IH1cblxuICBkcmF3TGluZSh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKSB7XG4gICAgdGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3I7XG4gICAgdGhpcy5jb250ZXh0LmxpbmVXaWR0aCA9IHRoaXMud2lkdGg7XG4gICAgdGhpcy5jb250ZXh0Lm1vdmVUbyh4MSwgeTEpO1xuICAgIHRoaXMuY29udGV4dC5saW5lVG8oeDIsIHkyKTtcbiAgICB0aGlzLmNvbnRleHQuc3Ryb2tlKCk7XG4gICAgdGhpcy5jb250ZXh0LmNsb3NlUGF0aCgpO1xuICB9XG59IiwiaW1wb3J0IHsgVG9vbCB9IGZyb20gJy4vdG9vbCdcblxuZXhwb3J0IGNsYXNzIEFycm93IGV4dGVuZHMgVG9vbCB7IH0iLCJpbXBvcnQgeyBUb29sIH0gZnJvbSAnLi90b29sJ1xuXG5leHBvcnQgY2xhc3MgRWxsaXBzaXMgZXh0ZW5kcyBUb29sIHsgfSIsImltcG9ydCB7IFRvb2wgfSBmcm9tICcuL3Rvb2wnXG5cbmV4cG9ydCBjbGFzcyBSZWN0YW5nbGUgZXh0ZW5kcyBUb29sIHsgfSIsImltcG9ydCB7IFRvb2wgfSBmcm9tICcuL3Rvb2wnXG5cbmV4cG9ydCBjbGFzcyBQZW4gZXh0ZW5kcyBUb29sIHtcbiAgcHJpdmF0ZSBpc0RyYXdpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBzdGFydFg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgc3RhcnRZOiBudW1iZXIgPSAwO1xuXG4gIHN0YXJ0KGU6IE1vdXNlRXZlbnQpIHtcbiAgICB0aGlzLnN0YXJ0WCA9IGUub2Zmc2V0WFxuICAgIHRoaXMuc3RhcnRZID0gZS5vZmZzZXRZXG4gICAgdGhpcy5pc0RyYXdpbmcgPSB0cnVlXG4gIH1cblxuICBtb3ZlKGU6IE1vdXNlRXZlbnQpIHtcbiAgICBpZiAodGhpcy5pc0RyYXdpbmcpIHtcbiAgICAgIHRoaXMuZHJhd0xpbmUodGhpcy5zdGFydFgsIHRoaXMuc3RhcnRZLCBlLm9mZnNldFgsIGUub2Zmc2V0WSlcbiAgICAgIHRoaXMuc3RhcnRYID0gZS5vZmZzZXRYXG4gICAgICB0aGlzLnN0YXJ0WSA9IGUub2Zmc2V0WVxuICAgIH1cbiAgfVxuXG4gIGVuZChlOiBNb3VzZUV2ZW50KSB7XG4gICAgaWYgKHRoaXMuaXNEcmF3aW5nKSB7XG4gICAgICB0aGlzLmRyYXdMaW5lKHRoaXMuc3RhcnRYLCB0aGlzLnN0YXJ0WSwgZS5vZmZzZXRYLCBlLm9mZnNldFkpXG4gICAgICB0aGlzLnN0YXJ0WCA9IDBcbiAgICAgIHRoaXMuc3RhcnRZID0gMFxuICAgICAgdGhpcy5pc0RyYXdpbmcgPSBmYWxzZVxuICAgIH1cbiAgfVxufSIsImltcG9ydCB7IFRvb2wgfSBmcm9tICcuL3Rvb2wnXG5cbmV4cG9ydCBjbGFzcyBNb3NhaWMgZXh0ZW5kcyBUb29sIHsgfSIsImltcG9ydCB7IFRvb2wgfSBmcm9tICcuL3Rvb2wnXG5cbmV4cG9ydCBjbGFzcyBUZXh0IGV4dGVuZHMgVG9vbCB7IH0iLCJpbXBvcnQgeyBUb29sIH0gZnJvbSAnLi90b29sJ1xuXG5leHBvcnQgY2xhc3MgRGlhbWV0ZXIgZXh0ZW5kcyBUb29sIHsgfSIsImltcG9ydCB7IFRvb2wgfSBmcm9tICcuL3Rvb2wnXG5cbmV4cG9ydCBjbGFzcyBDb2xvciBleHRlbmRzIFRvb2wgeyB9IiwiaW1wb3J0IHsgQXJyb3cgfSBmcm9tICcuL2Fycm93J1xuaW1wb3J0IHsgRWxsaXBzaXMgfSBmcm9tICcuL2VsbGlwc2lzJ1xuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSAnLi9yZWN0YW5nbGUnXG5pbXBvcnQgeyBQZW4gfSBmcm9tICcuL3BlbidcbmltcG9ydCB7IE1vc2FpYyB9IGZyb20gJy4vbW9zYWljJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4vdGV4dCdcbmltcG9ydCB7IERpYW1ldGVyIH0gZnJvbSAnLi9kaWFtZXRlcidcbmltcG9ydCB7IENvbG9yIH0gZnJvbSAnLi9jb2xvcidcbmltcG9ydCB7IFRvb2wgfSBmcm9tICcuL3Rvb2wnXG5cbmV4cG9ydCBjbGFzcyBFZGl0b3Ige1xuICBwcml2YXRlIGFycm93VG9vbDogQXJyb3dcbiAgcHJpdmF0ZSBlbGxpcHNpc1Rvb2w6IEVsbGlwc2lzXG4gIHByaXZhdGUgcmVjdGFuZ2xlVG9vbDogUmVjdGFuZ2xlXG4gIHByaXZhdGUgcGVuVG9vbDogUGVuXG4gIHByaXZhdGUgbW9zYWljVG9vbDogTW9zYWljXG4gIHByaXZhdGUgdGV4dFRvb2w6IFRleHRcbiAgcHJpdmF0ZSBkaWFtZXRlclRvb2w6IERpYW1ldGVyXG4gIHByaXZhdGUgY29sb3JUb29sOiBDb2xvclxuICBwcml2YXRlIGN1cnJlbnRUb29sOiBUb29sXG4gIHB1YmxpYyBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50XG4gIHByaXZhdGUgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEXG4gIHByaXZhdGUgY29sb3I6IHN0cmluZyA9ICdyZWQnXG4gIHByaXZhdGUgd2lkdGg6IG51bWJlciA9IDVcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBFZGl0b3JPcHRpb25zKSB7XG4gICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLmlkKSBhcyBIVE1MQ2FudmFzRWxlbWVudFxuICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJylcblxuICAgIGNvbnN0IHRvb2xPcHRpb25zID0ge1xuICAgICAgY2FudmFzOiB0aGlzLmNhbnZhcyxcbiAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dCxcbiAgICAgIGNvbG9yOiB0aGlzLmNvbG9yLFxuICAgICAgd2lkdGg6IHRoaXMud2lkdGhcbiAgICB9XG5cbiAgICB0aGlzLmFycm93VG9vbCA9IG5ldyBBcnJvdyh0b29sT3B0aW9ucylcbiAgICB0aGlzLmVsbGlwc2lzVG9vbCA9IG5ldyBFbGxpcHNpcyh0b29sT3B0aW9ucylcbiAgICB0aGlzLnJlY3RhbmdsZVRvb2wgPSBuZXcgUmVjdGFuZ2xlKHRvb2xPcHRpb25zKVxuICAgIHRoaXMucGVuVG9vbCA9IG5ldyBQZW4odG9vbE9wdGlvbnMpXG4gICAgdGhpcy5tb3NhaWNUb29sID0gbmV3IE1vc2FpYyh0b29sT3B0aW9ucylcbiAgICB0aGlzLnRleHRUb29sID0gbmV3IFRleHQodG9vbE9wdGlvbnMpXG4gICAgdGhpcy5kaWFtZXRlclRvb2wgPSBuZXcgRGlhbWV0ZXIodG9vbE9wdGlvbnMpXG4gICAgdGhpcy5jb2xvclRvb2wgPSBuZXcgQ29sb3IodG9vbE9wdGlvbnMpXG4gICAgdGhpcy5jdXJyZW50VG9vbCA9IHRoaXMucGVuVG9vbFxuICB9XG5cbiAgcHVibGljIGNob29zZVRvb2wodG9vbDogVG9vbCkge1xuICAgIHRoaXMuY3VycmVudFRvb2wgPSB0b29sXG4gICAgdGhpcy5jdXJyZW50VG9vbC5jb2xvciA9IHRoaXMuY29sb3JcbiAgICB0aGlzLmN1cnJlbnRUb29sLndpZHRoID0gdGhpcy53aWR0aFxuICB9XG5cbiAgcHVibGljIG9uU3RhcnQoZTogTW91c2VFdmVudCkge1xuICAgIHRoaXMuY3VycmVudFRvb2wuc3RhcnQoZSlcbiAgfVxuXG4gIHB1YmxpYyBvbk1vdmUoZTogTW91c2VFdmVudCkge1xuICAgIHRoaXMuY3VycmVudFRvb2wubW92ZShlKVxuICB9XG5cbiAgcHVibGljIG9uRW5kKGU6IE1vdXNlRXZlbnQpIHtcbiAgICB0aGlzLmN1cnJlbnRUb29sLmVuZChlKVxuICB9XG59IiwiaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi9saWIvZWRpdG9yJ1xuXG5leHBvcnQgY2xhc3MgUGhvdG9FZGl0b3Ige1xuICBwcml2YXRlIGVkaXRvcjogRWRpdG9yO1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmVkaXRvciA9IG5ldyBFZGl0b3Ioe1xuICAgICAgaWQ6ICdkZW1vJ1xuICAgIH0pXG5cbiAgICB0aGlzLmVkaXRvci5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcbiAgICAgIHRoaXMuZWRpdG9yLm9uU3RhcnQoZSlcbiAgICB9KVxuXG4gICAgdGhpcy5lZGl0b3IuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChlKSA9PiB7XG4gICAgICB0aGlzLmVkaXRvci5vbk1vdmUoZSlcbiAgICB9KVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZSkgPT4ge1xuICAgICAgdGhpcy5lZGl0b3Iub25FbmQoZSlcbiAgICB9KVxuICB9XG59XG5cbm5ldyBQaG90b0VkaXRvcigpIl0sInNvdXJjZVJvb3QiOiIifQ==